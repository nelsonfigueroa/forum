<% if user_signed_in? %>
  <% if current_user.upvoted_post?(post) %>
    <%= form_with(model: current_user.upvotes.where(:post_id => post.id).first, method: :delete) do |f| %>
      <%= f.hidden_field :post_id, :value => post.id %>
      <%= button_tag type: 'submit', class: 'page-link bg-primary text-white' do %>
        <%= inline_svg "upvote.svg", size: '16 * 16' %>
      <% end %>
    <% end %>
  <% else %>
    <%= form_with(model: Upvote.new) do |f| %>
      <%= f.hidden_field :post_id, :value => post.id %>
      <%= button_tag type: 'submit', class: 'page-link' do %>
        <%= inline_svg "upvote.svg", size: '16 * 16' %>
      <% end %>
    <% end %>
  <% end %>
<% else %>
  <button type="button" class='page-link' disabled><%= inline_svg "upvote.svg", size: '16 * 16' %></button>
<% end %>